<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Artifact</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="css/styles.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p class="navbar">
<span class="smallcaps">= <strong>“Marko” Markup Compiler</strong> = <a
href="readme.html">Readme</a> ~ <a href="changelog.html">Changelog</a> ~
<a href="demo.html">Demo</a> ~ <a href="story.html">Story</a> ~ <a
href="https://github.com/nvoynov/marko">Github</a></span>
</p>
<header id="title-block-header">
<h1 class="title">Artifact</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#intro" id="toc-intro">Intro</a>
<ul>
<li><a href="#intro-01" id="toc-intro-01">Purpose</a></li>
<li><a href="#intro-02" id="toc-intro-02">Problem</a></li>
<li><a href="#intro-03" id="toc-intro-03">Product</a></li>
<li><a href="#intro-04" id="toc-intro-04">Scope</a></li>
<li><a href="#intro-05" id="toc-intro-05">Definitions</a></li>
<li><a href="#intro-06" id="toc-intro-06">References</a></li>
<li><a href="#intro-07" id="toc-intro-07">Overview</a></li>
</ul></li>
<li><a href="#usr" id="toc-usr">Users</a></li>
<li><a href="#ur" id="toc-ur">User Requirements</a>
<ul>
<li><a href="#uc" id="toc-uc">Use Cases</a>
<ul>
<li><a href="#uc-create" id="toc-uc-create">Create a new
project</a></li>
<li><a href="#uc-manage" id="toc-uc-manage">Manage artifact
sources</a></li>
<li><a href="#uc-compile" id="toc-uc-compile">Compile artifact</a></li>
<li><a href="#uc-automate" id="toc-uc-automate">Automate tasks</a></li>
</ul></li>
</ul></li>
<li><a href="#fr" id="toc-fr">Functional Requirements</a>
<ul>
<li><a href="#fr-treenode" id="toc-fr-treenode">TreeNode</a>
<ul>
<li><a href="#fr-treenode-tree" id="toc-fr-treenode-tree">Tree
Metadata</a></li>
<li><a href="#fr-treenode-orig" id="toc-fr-treenode-orig">Source
Metadata</a></li>
</ul></li>
<li><a href="#fr-markup" id="toc-fr-markup">Source Markup</a>
<ul>
<li><a href="#fr-markup-node" id="toc-fr-markup-node">Node
Markup</a></li>
<li><a href="#fr-markup-01" id="toc-fr-markup-01">Get Sources</a></li>
<li><a href="#fr-markup-02" id="toc-fr-markup-02">Parse Source</a></li>
<li><a href="#fr-markup-03" id="toc-fr-markup-03">Assemble Tree</a></li>
<li><a href="#fr-markup-04" id="toc-fr-markup-04">Inject Id</a></li>
<li><a href="#fr-markup-05" id="toc-fr-markup-05">Checking Tree</a></li>
</ul></li>
<li><a href="#fr-create" id="toc-fr-create">Create project</a></li>
<li><a href="#fr-assemble" id="toc-fr-assemble">Assemble
artifact</a></li>
<li><a href="#fr-compile" id="toc-fr-compile">Compile artifact</a></li>
</ul></li>
<li><a href="#ui" id="toc-ui">Interface Requirements</a>
<ul>
<li><a href="#ui-cli" id="toc-ui-cli">Command-line interface</a>
<ul>
<li><a href="#ui-cli-01" id="toc-ui-cli-01">Create a new
project</a></li>
<li><a href="#ui-cli-02" id="toc-ui-cli-02">Compile artifact</a></li>
</ul></li>
<li><a href="#ui-gem" id="toc-ui-gem">Gem interface</a>
<ul>
<li><a href="#ui-gem-01" id="toc-ui-gem-01">Marko.assemble</a></li>
<li><a href="#ui-gem-02" id="toc-ui-gem-02">Marko.compile</a></li>
</ul></li>
</ul></li>
<li><a href="#as" id="toc-as">Assumptions and Dependencies</a>
<ul>
<li><a href="#as-01" id="toc-as-01">Graphical User Interface</a></li>
<li><a href="#as-02" id="toc-as-02">Versions and Access
management</a></li>
<li><a href="#as-03" id="toc-as-03">Deliverables Publishing</a></li>
</ul></li>
</ul>
</nav>
<h1 id="intro">Intro</h1>
<h2 id="intro-01">Purpose</h2>
<p>The main purpose of this document is to provide a comprehensive demo
project for Marko Gem. The other technical purpose is to have Marko
Sandbox for testing and development.</p>
<h2 id="intro-02">Problem</h2>
<p><strong>The problem of</strong> of managing large structured texts
(articles, books, specific structured documents)
<strong>affects</strong> the authors of such texts <strong>the impact of
which is</strong> the text management process itself became a pain as
the text groves and the structure evolves <strong>a successful solution
would be</strong> a software that provides</p>
<ul>
<li>a simple markup that is easy to write and read by humans and
machines</li>
<li>the ability to manage the text as a bunch of structured separate
files</li>
<li>the ability to publish the text and share it audience</li>
<li>the ability to collaborate between the authors working together on
the text</li>
<li>the ability to automate some content processing tasks</li>
</ul>
<h2 id="intro-03">Product</h2>
<p><strong>For</strong> authors of large structured texts
<strong>Who</strong> need simple reliable text management process
<strong>The</strong> Marko Markup Compiler is a free text management
scripting software <strong>That</strong> utilizes the docs-as-code
approach <strong>Unlike</strong> other competitive approaches like using
word processors, Wiki system, or dedicated content publishing systems
<strong>Our product</strong> does not require any special environment
and can be adopted in any text environment.</p>
<p>The Marko provides you with:</p>
<ul>
<li>the simple markup based on Markdown, extended by tree hierarchy
helpers</li>
<li>the text repository is just a free directory structure inside the
file system</li>
<li>the text tree hierarchy of nodes that present your text pieces</li>
<li>the ability to automate content processing tasks by providing a
scripting layer</li>
</ul>
<p>Having large structured texts as just a bunch of plain text files,
one can</p>
<ul>
<li>use any convenient text editor<br />
</li>
<li>work together with other authors in the Git repository</li>
<li>use any available text processing tools</li>
</ul>
<h2 id="intro-04">Scope</h2>
<p>The developed system will provide the following components:</p>
<ul>
<li>the simple markup format with abilities to build a tree
hierarchy</li>
<li>the markup parser that will turn markup sources into programmable
objects</li>
<li>the markup tree assembler that will build a single tree
hierarchy</li>
<li>the markup tree compiler that will turn the markup tree into
deliverables</li>
<li>the Marko Promo project that will help the users adopt the
approach</li>
</ul>
<h2 id="intro-05">Definitions</h2>
<dl>
<dt>CLI</dt>
<dd>
<p>Command-line interface</p>
</dd>
<dt>ERB</dt>
<dd>
<p>Ruby Templating system</p>
</dd>
</dl>
<h2 id="intro-06">References</h2>
<ol type="1">
<li><a href="https://www.markdownguide.org/">Markdown Guide</a></li>
<li><a href="https://pandoc.org/MANUAL.html">Pandoc User’s
Guide</a></li>
<li><a href="https://git-scm.com/docs/user-manual.html">Git User’s
Manual</a></li>
</ol>
<h2 id="intro-07">Overview</h2>
<p>The remaining sections of this document requirements to the system.
The document structured the manner of software requirements
specification, where one can find descriptions of <a
href="#usr">Users</a>, <a href="#uc">Use Cases</a>, <a
href="#fr">Functional Requirements</a>, and <a href="#ui">Interface
Requirements</a>.</p>
<h1 id="usr">Users</h1>
<p>The users of the system are different people who play for authoring
various sorts of technical documentation. It might be a technical
writer, business/systems analyst, developer, etc.</p>
<h1 id="ur">User Requirements</h1>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ur</td>
</tr>
</tbody>
</table>
<h2 id="uc">Use Cases</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>uc</td>
</tr>
</tbody>
</table>
<h3 id="uc-create">Create a new project</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>uc.create</td>
</tr>
</tbody>
</table>
<p>The scenario is used when the user wants to create a new Marko
artifact project</p>
<p><strong>Main Flow</strong></p>
<ol type="1">
<li>The user requests the system to create a new project passing the
directory name for the project.</li>
<li>The system checks the directory does not exist; directory des not
exist.</li>
<li>The system creates the directory and furnish it with basic Marko
structure.</li>
<li>The system reports to the user about created directories and
files.</li>
<li>The scenario is finished</li>
</ol>
<p><strong>Extensions</strong></p>
<p><u>2a</u> The directory exists: The system reports to the user that
the directory exits. The scenario if finished.</p>
<h3 id="uc-manage">Manage artifact sources</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>uc.manage</td>
</tr>
</tbody>
</table>
<p><u>Outside the system</u> scenario of managing the artifact sources,
templates, automated tasks.</p>
<p><strong>Main Flow</strong></p>
<p><u>Outside the system</u></p>
<ol type="1">
<li>The user creates, modifies, removes markup files inside
<code>src</code> directory of Marko project (created by <a
href="#uc-create">Create a new project</a> scenario.)</li>
<li>The user creates, modifies, removes templates for the artifact
compilation.</li>
<li>The user creates, modifies, removes automation tasks.</li>
</ol>
<h3 id="uc-compile">Compile artifact</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>uc.compile</td>
</tr>
</tbody>
</table>
<p>The scenario is used when the user wants to compile the artifact from
the artifact sources</p>
<p><strong>Prerequisites</strong></p>
<ol type="1">
<li>The user inside Marko project (see <a href="#uc-create">Create a new
project</a>)</li>
</ol>
<p><strong>Main Flow</strong></p>
<ol type="1">
<li>The user requests the system to compile the project sources into the
artifact passing compilation template.</li>
<li>The system read the artifact sources and assembles it into the
artifact tree; no errors detected.</li>
<li>The system compiles the artifact tree into single artifact using
provided template.</li>
<li>The system reports compiled artifact filename to the user.</li>
<li>The scenario is finished.</li>
</ol>
<p><strong>Extensions</strong></p>
<p><u>2a</u> The system detected markup errors inside sources: The
system reports the errors found to the user; the scenario is
finished.</p>
<p><u>2b</u> The system detected tree structure errors during the
assembling stage: The system reports the errors found to the user; the
scenario is finished.</p>
<h3 id="uc-automate">Automate tasks</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>uc.automate</td>
</tr>
</tbody>
</table>
<p>Basically, Marko assembles artifacts from markup sources, but there
are cases when user wants to add some information from other sources
like UI/UML/ER design tools, some prepared data files in whatever it
could be form. Sometimes the user wants to modify or remove some content
inside the markup sources.</p>
<p>Such tasks could be automated by intervening into the artifact tree
between assemblage and compilation stages.</p>
<p><strong>Main Flow</strong></p>
<ol type="1">
<li>The user design one or more automation scripts</li>
<li>The user injects the automation scripts into compilation
process</li>
</ol>
<h1 id="fr">Functional Requirements</h1>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr</td>
</tr>
</tbody>
</table>
<h2 id="fr-treenode">TreeNode</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.treenode</td>
</tr>
</tbody>
</table>
<p>The system shall provide <code>Node</code> entity with the following
properties that provide the following attributes:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Type</th>
<th>Mult.</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">String</td>
<td>1</td>
<td>“”</td>
<td>Node identifier</td>
</tr>
<tr class="even">
<td style="text-align: left;">parent</td>
<td style="text-align: left;">Node</td>
<td>1</td>
<td>null</td>
<td>Parent node</td>
</tr>
<tr class="odd">
<td style="text-align: left;">title</td>
<td style="text-align: left;">String</td>
<td>1</td>
<td>“”</td>
<td>Node title</td>
</tr>
<tr class="even">
<td style="text-align: left;">meta</td>
<td style="text-align: left;">Hash</td>
<td>1</td>
<td>{}</td>
<td>Node metadata</td>
</tr>
<tr class="odd">
<td style="text-align: left;">body</td>
<td style="text-align: left;">String</td>
<td>1</td>
<td>“”</td>
<td>Node body</td>
</tr>
<tr class="even">
<td style="text-align: left;">items</td>
<td style="text-align: left;">TreeNode</td>
<td>0..N</td>
<td>[]</td>
<td>Child nodes</td>
</tr>
</tbody>
</table>
<h3 id="fr-treenode-tree">Tree Metadata</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.treenode.tree</td>
</tr>
</tbody>
</table>
<p>To assemble the project artifact from nodes placed among several
source files, the system shall provide the following optional tree
metadata attributes:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Attribute</th>
<th style="text-align: left;">Type</th>
<th>Mult.</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">String</td>
<td>0..1</td>
<td style="text-align: left;">Unique node id</td>
</tr>
<tr class="even">
<td style="text-align: left;">parent</td>
<td style="text-align: left;">String</td>
<td>0..1</td>
<td style="text-align: left;">Parent id</td>
</tr>
<tr class="odd">
<td style="text-align: left;">order_index</td>
<td style="text-align: left;">String</td>
<td>0..N</td>
<td style="text-align: left;">Children IDs</td>
</tr>
</tbody>
</table>
<h3 id="fr-treenode-orig">Source Metadata</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.treenode.orig</td>
</tr>
</tbody>
</table>
<p>During source file parsing, the system must store the following node
origin information:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Attribute</th>
<th style="text-align: left;">Type</th>
<th>Mult.</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">origin</td>
<td style="text-align: left;">String</td>
<td>1</td>
<td style="text-align: left;">file name</td>
</tr>
<tr class="even">
<td style="text-align: left;">lineno</td>
<td style="text-align: left;">String</td>
<td>1</td>
<td style="text-align: left;">file line</td>
</tr>
</tbody>
</table>
<h2 id="fr-markup">Source Markup</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup</td>
</tr>
</tbody>
</table>
<p>The main and only entity in the system is <a
href="#fr-treenode">TreeNode</a>. The system shall provide the following
abilities for the entity:</p>
<ul>
<li><a href="#fr-markup-node">Node Markup</a></li>
<li><a href="#fr-markup-01">Get Sources</a></li>
<li><a href="#fr-markup-02">Parse Source</a></li>
<li><a href="#fr-markup-03">Assemble Tree</a></li>
<li><a href="#fr-markup-04">Inject Id</a></li>
<li><a href="#fr-markup-05">Checking Tree</a></li>
</ul>
<h3 id="fr-markup-node">Node Markup</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup.node</td>
</tr>
</tbody>
</table>
<p>The system shall support the following node markup.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># &lt;title&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>{{<span class="sc">\&lt;</span>meta<span class="sc">\&gt;</span>}}</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">\&lt;</span>body<span class="sc">\&gt;</span></span></code></pre></div>
<p>Where:</p>
<ul>
<li>Each node starts from Markdown header mark <code>#</code>.</li>
<li>The header mark can be followed by node title.</li>
<li>The next line <em>might</em> contain metadata block:
<ul>
<li>that starts from <code>{{</code> and finishes with
<code>}}</code>;</li>
<li>that can be one or multiline string.</li>
</ul></li>
<li>The next lines tile the end of file or next header mark
<code>#</code> are considered as node body.</li>
</ul>
<h3 id="fr-markup-01">Get Sources</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup.01</td>
</tr>
</tbody>
</table>
<p>The system shall provide function to getting all sources files from
project repository.</p>
<h3 id="fr-markup-02">Parse Source</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup.02</td>
</tr>
</tbody>
</table>
<p>The system shall provide the function to parse source file.</p>
<p>During the parsing process the system must record source information
within the node parsed, such as origin file name and the number of line
inside the origin where the node begins. This information must be stored
inside metadata as <a href="#fr-treenode-orig">Source Metadata</a>.</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>filename</td>
<td>String</td>
<td>1</td>
<td>filename</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>node</td>
<td><a href="#fr-treenode">TreeNode</a></td>
<td>0..N</td>
<td>node parsed</td>
</tr>
</tbody>
</table>
<h3 id="fr-markup-03">Assemble Tree</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup.03</td>
</tr>
</tbody>
</table>
<p>The system shall provide the function to assemble the artifact tree.
The artifact tree is assembled based on <a href="#fr-treenode-tree">Tree
Metadata</a>.</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>node</td>
<td><a href="#fr-treenode">TreeNode</a></td>
<td>0..N</td>
<td>node collection</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>node</td>
<td><a href="#fr-treenode">TreeNode</a></td>
<td>1</td>
<td>root node</td>
</tr>
</tbody>
</table>
<h3 id="fr-markup-04">Inject Id</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup.04</td>
</tr>
</tbody>
</table>
<p>The system shall provide each node with unique node Id. Some nodes
can already have id from source files, especially those that referenced
as parent or child and placed in separate files. For those nodes that
still have empty id, the system must generate auto id 0..99.</p>
<p>For example, when the system has assembled the tree</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Artifact</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">### Purpose</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">### Scope</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># User Requirements #ur</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Functional Requirements #fr</span></span></code></pre></div>
<p>and then generated id, the generated ids should be as follows:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Artifact Title #00</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction #01.01</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">### Purpose #01.01.01</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">### Scope #01.01.02</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># User Requirements #ur</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Functional Requirements #fr</span></span></code></pre></div>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>root</td>
<td><a href="#fr-treenode">TreeNode</a></td>
<td>1</td>
<td>root node</td>
</tr>
</tbody>
</table>
<h3 id="fr-markup-05">Checking Tree</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.markup.05</td>
</tr>
</tbody>
</table>
<p>The system shall provide the function to check assembled tree for
errors related to assembling tree based on <a
href="#fr-treenode-tree">Tree Metadata</a>. The system must check the
following errors:</p>
<ul>
<li><code>duplicate id</code>, finds two or more nodes that share the
same id;</li>
<li><code>unknown parent</code>, finds nodes that have
<code>parent</code> metadata, but parent not found in the tree;</li>
<li><code>unknown index</code>, finds nodes with
<code>order_index</code> metadata where one or more children in the
index not found;</li>
<li><code>unknown links</code>, finds nodes containing links but the
links are not found.</li>
</ul>
<h2 id="fr-create">Create project</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.create</td>
</tr>
</tbody>
</table>
<p>The system shall provide the function to create a new project.</p>
<p><u>Input</u></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th style="text-align: left;">Type</th>
<th>Mult.</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>directory</td>
<td style="text-align: left;">string</td>
<td>1</td>
<td style="text-align: left;">project directory</td>
</tr>
</tbody>
</table>
<p><u>Output</u></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th style="text-align: left;">Type</th>
<th>Mult.</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>filename</td>
<td style="text-align: left;">string</td>
<td>1..N</td>
<td style="text-align: left;">created directory or filename</td>
</tr>
</tbody>
</table>
<p><u>Flow</u></p>
<ol type="1">
<li>Fail “directory exits” if the <code>directory</code> already
exist</li>
<li>Create <code>directory</code></li>
<li>Create project structure<br />
</li>
<li>Create basic templates</li>
<li>Return list of created directories and files</li>
</ol>
<h2 id="fr-assemble">Assemble artifact</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.assemble</td>
</tr>
</tbody>
</table>
<p>The system shall provide the function to assemble the artifact.</p>
<p><u>Input</u></p>
<ul>
<li>NO PARAMETERS</li>
</ul>
<p><u>Output</u></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tree</td>
<td><a href="#fr-treenode">TreeNode</a></td>
<td>1</td>
<td>assembled tree</td>
</tr>
</tbody>
</table>
<p><strong>Flow</strong></p>
<ol type="1">
<li>Get list of the project sources</li>
<li>Parse sources collecting parsing errors.</li>
<li>Fail with the list of parsing errors when any.</li>
<li>Assemble the artifact tree based on id, parent, and order_index
metadata collecting tree errors.</li>
<li>Fail with the list of tree errors if any.</li>
<li>Generate auto IDs for nodes without ID.</li>
<li>Return artifact tree</li>
</ol>
<h2 id="fr-compile">Compile artifact</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>fr.compile</td>
</tr>
</tbody>
</table>
<p>The system shall provide the function to create deliverable
artifact.</p>
<p><u>Input</u></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Mult.</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tree</td>
<td><a href="#fr-treenode">TreeNode</a></td>
<td>0..1</td>
<td>assembled tree</td>
</tr>
<tr class="even">
<td>template</td>
<td>String</td>
<td>1</td>
<td>rendering template</td>
</tr>
<tr class="odd">
<td>filename</td>
<td>String</td>
<td>1</td>
<td>output artifact filename</td>
</tr>
</tbody>
</table>
<p><u>Output</u></p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th style="text-align: left;">Type</th>
<th>Mult.</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>filename</td>
<td style="text-align: left;">String</td>
<td>1</td>
<td style="text-align: left;">output artifact filename</td>
</tr>
</tbody>
</table>
<p><u>Flow</u></p>
<ol type="1">
<li>Assemble the artifact tree by invoking <a
href="#fr-assemble">Assemble artifact</a> unless <code>tree</code>
parameter provided</li>
<li>Load template body from <code>template</code></li>
<li>Backup <code>filename</code> to <code>&lt;filename&gt;~</code> when
esists</li>
<li>Render <code>template</code> for each node of <code>tree</code></li>
<li>Save rendered template into <code>filename</code></li>
<li>Return <code>filename</code></li>
</ol>
<h1 id="ui">Interface Requirements</h1>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui</td>
</tr>
</tbody>
</table>
<h2 id="ui-cli">Command-line interface</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui.cli</td>
</tr>
</tbody>
</table>
<p>The system shall provide the command-line interface. The interface
must provide the following commands:</p>
<ul>
<li><a href="#ui-cli-01">Create a new project</a></li>
<li><a href="#ui-cli-02">Compile artifact</a></li>
</ul>
<h3 id="ui-cli-01">Create a new project</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui.cli.01</td>
</tr>
</tbody>
</table>
<p>The system shall provide the <code>new PROJECT</code> command. When
the user requests the <code>new PROJECT</code> command, the system must
call <a href="#fr-create">Create project</a>.</p>
<h3 id="ui-cli-02">Compile artifact</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui.cli.02</td>
</tr>
</tbody>
</table>
<p>The system shall provide the
<code>compile [-t TEMPALTE] [-o FILENAME]</code> command. When the user
requests the <code>compile</code> command, the system must call <a
href="#fr-compile">Compile artifact</a>.</p>
<h2 id="ui-gem">Gem interface</h2>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui.gem</td>
</tr>
</tbody>
</table>
<p>The system shall provide Ruby Gem with the following functions</p>
<ul>
<li><a href="#ui-gem-01">Marko.assemble</a></li>
<li><a href="#ui-gem-02">Marko.compile</a></li>
</ul>
<h3 id="ui-gem-01">Marko.assemble</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui.gem.01</td>
</tr>
</tbody>
</table>
<h3 id="ui-gem-02">Marko.compile</h3>
<table>
<tbody>
<tr class="odd">
<td><strong>Id</strong></td>
<td>ui.gem.02</td>
</tr>
</tbody>
</table>
<h1 id="as">Assumptions and Dependencies</h1>
<h2 id="as-01">Graphical User Interface</h2>
<p>The user will utilize his preferred text editor so no other UI
requirement</p>
<h2 id="as-02">Versions and Access management</h2>
<p>The user will utilize Git so no other version management or access
management requirements</p>
<h2 id="as-03">Deliverables Publishing</h2>
<p>The user will publish deliverables by using Pandoc so there are no
publishing requirements</p>
<div id="footer">
<hr />
<p>© 2022-2024 <a href="http://nvoynov.github.io/">nvoynov</a></p>
</div>
</body>
</html>
